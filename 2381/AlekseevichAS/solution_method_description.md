# Описание метода решения
Как уже упоминалось ранее, в данной работе рассматривается исключительно алгоритм поиска элемента звуковой базы. Пускай даны требуемые параметры звуковых элеметов, необходимых для синтеза некоторого предложения или слова. Задача Unit Selection - выбрать наилучшую последовательность реализаций звуковых элементов по полученным параметрам.[3]

В качестве метрики характеризующей насколько элемент *u* подходит для синтеза текущей фонетической единицы, используются понятия стоимости замены (англ. target cost) и стоимости связи (англ. concatenation cost). Данные оценки представляют собой взвешенные суммы различий в признаках между двумя элементами. Используемые признаки не регламентируются Unit Selection и выбираются разработчиком. Как правило используются следующая информация:
* частота основного тона
* длительность
* контекст
* позиция элемента в слоге/слове
* количество ударных слогов
* энергия
* спектральные параметры:
    * MFCC (Mel Frequency Cepstral Coefficients);
    * LPC (Linear Predictive Coding Coefficients);
    * LSF (Line Spectral Frequencies);
    * MCA (Multiple Centroid Analisys).

Множество исследований, имеющих своей целью определить какая комбинация спектральное представление/метрика даст лучшую корреляцию с человеческим восприятием речи, не привели к однозначному ответу. Однако, можно отметить, что расстояние Махаланобиса на коэффициентах MFCC даёт хорошие результаты в большинстве тестов.[2]

Таким образом, стоимость замены, характеризующая близость выбранного элемента к искомому, вычисляется по формуле:  
![equtation](http://www.sciweavers.org/upload/Tex2Img_1513313102/render.png)  
где *C* - расстояние между *k*-ми характеристиками элементов,
*w* - вес для *k*-ой характеристики,  
*u* - элемент из звуковой базы.  

А стоимость связи, отображающая насколько хорошо сочетаются два последовательно выбранных элемента:  
![equtation](http://www.sciweavers.org/upload/Tex2Img_1513313186/render.png)  
где *C* - расстояние между *k*-ми характеристиками элементов,  
*w* - вес для *k*-ой характеристики.  

Общая стоимость последовательности из *n* элементов, вычисляется как сумма описанных выше стоимостей:  
![equtation](http://www.sciweavers.org/upload/Tex2Img_1513313517/render.png)  

Поскольку различия одних характеристик оказывают больше влияния, чем различия других характеристик, возникает необходимость использования весовых коэффициентов *w*. Существуют следующие методики определения *w*:
* автоматический подбор на основе объективной меры;
    Идея - найти набор тестов, который минимизирует аккустическое расстояние между синтезированной и эталонной речью. Задача определения данной метрики является отдельной проблемой.
* перцепционный;
    Проводится эксперимент, в ходе которого, испытатели оценивают качество синтезированной речи. Полученные оценки используют для тренировки модели.
* ручная настройка.
    Коэффициенты полностью определяются разработчиком системы.

Задача Unit Selection - выбрать множество элементов из звуковой базы таким образом, чтобы минимизировать общую стоимость. Классическим решением является использование поиска Витерби с отсечениями, поскольку полный поиск является слишком долгой операцией. Используются две основыные методики отсечения: предварительный отбор (англ. pre-selection) и отсечение лучей (англ. beam pruning). Предварительный отбор оставляет фиксированное количество лучших кандидатов для каждого элемента, отсечение лучей рассматривает фиксированное количество локально оптимальных путей.

В данной работе рассматривается возможность использования суффиксных деревьев для оптимизации поиска.

**Определение**[5]  
Суффиксное дерево для m-символьной строки S - это ориентированный дерево с корнем, имеющее ровно m листьев, занумерованных от 1 до m. Каждая внутренняя вершина, отличная от корня, имеет не меньше двух детей, а каждая дуга помечена непустой подстрокой строки S. Никакие две дуги, выходящие из одной и той же вершины, не могут иметь пометок, начинающихся с одного и того же символа.

Для того, чтобы можно было построить суффиксное дерево для любой строки, вводится терминальный символ конца строки, не входящий в основной алфавит.

![Рис. 1 - Суффиксное дерево S=xabxac](https://pp.userapi.com/c830109/v830109518/13118/imS3qqyjCNY.jpg)

Рис. 1 - Суффиксное дерево S=xabxac

Суффиксные деревья позволяют решать множество задач поиска на неструктурированных данных. Для строки T длинной *m*, суффиксное дерево занимает *O(m)* памяти, построение дерева требует время *O(m)*. Поиск вхождения строки S длинной *n* в строку T, занимает *O(n)*.
Не смотря на то, что обычно, суффиксные деревья используются для задач точного совпадения, они позволяют так же решать задачи неточного совпадения (нечеткого поиска), необходимые для Unit Selection.


## Источники
1. Motirz M., Suffix Trees and threir Applications // Munchen Technical University, Munchen, 1999
1. Рыбин С. В. СИНТЕЗ РЕЧИ Учебное пособие по дисциплине "Синтез речи". – СПб: Университет ИТМО, 2014. – 92 с.
1. Black A.W., Hunt A.J. Unit Selection in a Concatenative Speech Synthesis Using a Large Speech Database // In Proceedings of ICASSP 96. Atlanta, Georgia, 1996. Vol. 1, pp. 373-376.
1. Balint M. Suffix Trees and Threir Applications // Lorand University, Budapest, 2013
1. Гасфилд Дэн Строки, деревья и последовательности в алгоритмах: Информатика и вычислительная биология / Пер. с англ. И.В.Романовского. - СПб.: Невский Диалект; БХВ-Петербург, 2003. - 654 с.: ил.